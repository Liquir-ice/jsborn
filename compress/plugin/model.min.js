JSB.extendPlugin(JSB.cls("jsborn.plugin.model",{depends:["jsborn.core.model"],getPrototype:function(){return{addModel:this._add_model,delModel:this._del_model,getModel:this._get_model,getModelData:this._get_model_data,setModel:this._set_model}},initialize:function(){var b=this;b.PLUGIN_MODEL={model:[]};b.addListener("destroy",function(){for(var a=0;a<b.PLUGIN_MODEL.model.length;a++)b.PLUGIN_MODEL.model[a].destroy()})},_get_model_data:function(b){return this.PLUGIN_MODEL.model},_get_model:function(b){for(var a=
0;a<this.PLUGIN_MODEL.model.length;a++){var c=this.PLUGIN_MODEL.model[a];if(c.getOption().key==b)return c}return!1},_set_model:function(b,a){var c=this.getModel(b);if(!c)return!1;c.change(a)},_add_model:function(b,a){var c=JSB.create("jsborn.plugin.model.node",{key:b,data:jQuery.extend(!0,{},a)});this.PLUGIN_MODEL.model.push(c);return c},_del_model:function(b){for(var a=0;a<this.PLUGIN_MODEL.model.length;a++){var c=this.PLUGIN_MODEL.model[a];if(c.getOption().key==b)return this.PLUGIN_MODEL.model.splice(a,
1),c}return!1}}));
JSB.cls("jsborn.plugin.model.node",{getData:function(){return jQuery.extend(!0,{},this._obj_data.data)},setData:function(b){this._obj_data.data=b;return jQuery.extend(!0,{},this._obj_data.data)},setOption:function(b){return this._obj_data=b},getOption:function(){return this._obj_data},change:function(b){var a=JSB.core.model.getObjtDiff(this.getData(),b,"all");jQuery.isEmptyObject(a.add)||this.dispatchEvent("model-add",a.add);jQuery.isEmptyObject(a.del)||this.dispatchEvent("model-del",a.del);jQuery.isEmptyObject(a.modify)||
this.dispatchEvent("model-modify",a.modify);this.setData(b)},initialize:function(b){this.setOption(b)}});